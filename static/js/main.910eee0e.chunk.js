(this["webpackJsonpcelo-assist"]=this["webpackJsonpcelo-assist"]||[]).push([[0],{180:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},344:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"_payeeFullName","type":"string"},{"internalType":"string","name":"_payeeDescription","type":"string"},{"internalType":"string","name":"_networkType","type":"string"},{"internalType":"uint256","name":"_payeeGasFee","type":"uint256"}],"name":"createPayee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"deletePayeeRequest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"fetchPayeeById","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"fundPayee","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"getChatsById","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"string","name":"message","type":"string"}],"internalType":"struct CeloAssist.Chat[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPayeeLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"_message","type":"string"}],"name":"storeChatMessages","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},371:function(e,t){},377:function(e,t){},394:function(e,t){},396:function(e,t){},411:function(e,t){},412:function(e,t){},472:function(e,t){},474:function(e,t){},485:function(e,t){},487:function(e,t){},512:function(e,t){},513:function(e,t){},519:function(e,t){},521:function(e,t){},533:function(e,t){},560:function(e,t){},813:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(40),r=n.n(c),i=(n(356),n(29)),l=n(42),o=n(32),u=n(178),d=n.n(u),p=n(343),j=n(33),b=n.n(j),y=n(344),m=n(180),O=n(28),h=n.p+"static/media/celo-1.d4b7af52.jpg",f=n(2),x=function(e){var t=e.modal,n=e.toggle,s=e.createRequest,c=e.balance,r=(e.celo,e.loading),i=Object(a.useState)(""),l=Object(o.a)(i,2),u=l[0],d=l[1],p=Object(a.useState)(""),j=Object(o.a)(p,2),b=j[0],y=j[1],m=Object(a.useState)(""),x=Object(o.a)(m,2),g=x[0],v=x[1],w=Object(a.useState)(0),T=Object(o.a)(w,2),N=T[0],S=T[1],k=Object(f.jsx)("button",{className:"close",onClick:n,type:"button",children:"\xd7"});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("header",{className:"d-flex justify-content-between p-3",children:[Object(f.jsx)("h6",{children:"CeloAssist"}),Object(f.jsxs)("h6",{className:"shadow",children:[c," "," ","cUSD"]})]}),Object(f.jsx)("br",{}),Object(f.jsx)(O.Container,{children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"col-md-6 ",children:[Object(f.jsx)("h5",{children:"Celo Assist"}),Object(f.jsx)("p",{children:"Celo-Assist is a decentralized web application platform where a developer or user can assist another developer or user in paying for their gas fee, mint fee or anything that might require a small of Celo or cUSD be it testnet or mainnet. "}),Object(f.jsx)(O.Button,{color:"success",onClick:n,disabled:r,children:"Create a Request"})]}),Object(f.jsx)("div",{className:"col-md-6",children:Object(f.jsx)("img",{src:h,alt:"banner",className:"br-2 rounded shadow",width:"100%"})})]})}),Object(f.jsxs)(O.Modal,{isOpen:t,toggle:n,className:O.className,backdrop:"static",children:[Object(f.jsx)(O.ModalHeader,{toggle:n,close:k,children:"Create a Request"}),Object(f.jsxs)(O.ModalBody,{children:[Object(f.jsx)(O.Label,{style:{fontSize:"12px"},children:"Fullname"}),Object(f.jsx)(O.Input,{type:"text",placeholder:"Fullname",required:!0,value:u,onChange:function(e){return d(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)(O.Label,{style:{fontSize:"12px"},children:"Description"}),Object(f.jsx)(O.Input,{type:"textarea",placeholder:"Description",required:!0,value:b,onChange:function(e){return y(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)(O.Label,{style:{fontSize:"12px"},children:"Amount"}),Object(f.jsx)(O.Input,{type:"number",placeholder:"Fee",required:!0,value:N,onChange:function(e){return S(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)(O.Label,{style:{fontSize:"12px"},children:"Network Type"}),Object(f.jsxs)(O.Input,{type:"select",value:g,required:!0,onChange:function(e){return v(e.target.value)},children:[Object(f.jsx)("option",{value:"",children:"Select---"}),Object(f.jsx)("option",{value:"Testnet",children:"Testnet"}),Object(f.jsx)("option",{value:"Mainnet",children:"Mainnet"})]})]}),Object(f.jsx)(O.ModalFooter,{children:Object(f.jsx)(O.Button,{color:"success",onClick:function(){return s(u,b,N,g)},disabled:r,children:r?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.Spinner,{size:"sm",children:"Loading..."}),Object(f.jsxs)("span",{children:[" ","Submitting"]})]}):Object(f.jsx)("span",{children:"Submit "})})})]})]})},g=n(121),v=n.n(g),w=function(e){var t=e.requests,n=e.contract,s=e.kit,c=e.address,r=e.loading,u=e.getBalance,d=e.getRequests,p=Object(a.useState)(!1),j=Object(o.a)(p,2),y=j[0],h=j[1],x=Object(a.useState)({}),g=Object(o.a)(x,2),w=g[0],T=g[1],N=Object(a.useState)(""),S=Object(o.a)(N,2),k=S[0],C=S[1],B=Object(a.useState)(null),F=Object(o.a)(B,2),M=F[0],z=F[1],q=Object(a.useState)(!1),D=Object(o.a)(q,2),E=D[0],A=D[1],L=Object(a.useState)(!1),P=Object(o.a)(L,2),I=P[0],R=P[1],W=Object(a.useState)(!1),_=Object(o.a)(W,2),G=_[0],U=_[1],J=Object(a.useState)(!1),H=Object(o.a)(J,2),K=H[0],V=H[1],Y=Object(a.useState)(!1),Q=Object(o.a)(Y,2),X=Q[0],Z=Q[1],$=function(){U(!1),h(!y)},ee=Object(f.jsx)("button",{className:"close",onClick:$,type:"button",children:"\xd7"}),te=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise(function(){var e=Object(l.a)(Object(i.a)().mark((function e(a,s){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.fetchPayeeById(t).call();case 2:c=e.sent,a({id:t,owner:c[0],payeeFullName:c[1],payeeDescription:c[2],networkType:c[3],payeeGasFee:new b.a(c[4])});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),T(e),h(!0)})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t,a){var r,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,r=new s.web3.eth.Contract(m,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1"),l=new b.a(t).shiftedBy(18).toString(),e.next=6,r.methods.approve("0x3AcEEA272E68a5B95a087D708Bd7CaBfa9Ebe50b",l).send({from:c});case 6:return e.sent,e.next=9,n.methods.fundPayee(a).send({from:c});case 9:alert("Transfer successful"),A(!1),u(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log({error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.prev=1,e.next=4,n.methods.storeChatMessages(t,k).send({from:c});case 4:alert("sent"),se(t),V(!1),C(""),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),alert("Error"),V(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,n.methods.getChatsById(t).call();case 4:a=e.sent,z(a),R(!1),U(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("failed to fetch data"),R(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,n.methods.deletePayeeRequest(t).send({from:c});case 4:alert("Request deleted"),d(),Z(!1),h(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),alert("Error"),Z(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.Container,{children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("center",{children:Object(f.jsx)("h3",{className:"my-5",children:"Requests"})}),r?Object(f.jsx)("center",{children:Object(f.jsx)("p",{style:{fontSize:"12px"},children:"Loading requests please wait..."})}):t.filter((function(e,t){return"0x0000000000000000000000000000000000000000"!==e.owner})).map((function(e){return Object(f.jsx)("div",{className:"card shadow col-lg-4 col-md-4 col-sm-12 ml-3 mr-1 mb-3 p-0",children:Object(f.jsx)("div",{className:"card-body p-2",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)(v.a,{seed:e.owner,size:10,scale:3,className:"identicon rounded-circle"})}),Object(f.jsxs)("div",{className:"mx-3",children:[Object(f.jsx)("h6",{children:e.payeeFullName}),Object(f.jsxs)("p",{style:{margin:0,padding:0,fontSize:"12px"},children:["Network Type: ",e.networkType]})]}),Object(f.jsx)(O.Button,{size:"sm",color:"success",className:"p-1 flex-end",onClick:function(){return te(e.index)},children:"View"})]})})})}))]})}),Object(f.jsxs)(O.Modal,{isOpen:y,toggle:$,className:O.className,backdrop:"static",children:[Object(f.jsx)(O.ModalHeader,{toggle:$,close:ee,className:"d-flex justify-content-between",children:Object(f.jsx)("span",{children:"Details:"})}),Object(f.jsxs)(O.ModalBody,{children:[Object(f.jsx)("div",{className:"card",children:Object(f.jsx)("div",{className:"card-body",children:Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("div",{children:Object(f.jsx)(v.a,{seed:w.owner,size:10,scale:3,className:"identicon rounded-circle"})}),Object(f.jsxs)("div",{className:"mx-3",children:[Object(f.jsx)("h6",{className:"title",children:w.payeeFullName}),Object(f.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Description:"}),Object(f.jsx)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:w.payeeDescription}),Object(f.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Amount:"}),Object(f.jsxs)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:[w.payeeGasFee/Math.pow(10,18)," cUSD / Celo"]}),Object(f.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Network Type:"}),Object(f.jsx)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:w.networkType}),Object(f.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Wallet Address:"}),Object(f.jsx)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:w.owner}),Object(f.jsx)("br",{}),Object(f.jsx)(O.Button,{size:"sm",color:"success",disabled:E,onClick:function(){return ne(w.payeeGasFee/Math.pow(10,18),w.id)},children:E?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.Spinner,{size:"sm",children:"Loading..."}),Object(f.jsxs)("span",{children:[" ","Transfering"]})]}):Object(f.jsxs)("span",{children:["Transfer ",w.payeeGasFee/Math.pow(10,18)," cUSD "]})}),Object(f.jsx)(O.Button,{size:"sm",className:"mx-2",color:"primary",disabled:E,onClick:function(){return se(w.id)},children:I?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.Spinner,{size:"sm",children:"Loading..."}),Object(f.jsxs)("span",{children:[" ","Loading"]})]}):Object(f.jsx)("span",{children:"Chat "})}),Object(f.jsx)(O.Button,{size:"sm",className:"mx-4",color:"danger",onClick:function(){return ce(w.id)},disabled:X,children:X?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.Spinner,{size:"sm",children:"Loading..."}),Object(f.jsxs)("span",{children:[" ","Deleting"]})]}):Object(f.jsx)("span",{children:"Delete "})})]})]})})}),G&&Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsxs)("div",{className:"d-flex align-items-center",children:[Object(f.jsx)(O.Input,{type:"text",placeholder:"Type your message",value:k,onChange:function(e){return C(e.target.value)}}),Object(f.jsx)(O.Button,{size:"sm",disabled:K,className:"bg-success",onClick:function(){return ae(w.id)},children:K?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(O.Spinner,{size:"sm",children:"Loading..."})}):Object(f.jsx)("span",{children:"Send "})})]}),M&&M.map((function(e,t){return Object(f.jsxs)("div",{className:"bg-info rounded mt-2 p-1 text-white d-flex",children:[Object(f.jsx)(v.a,{seed:e[0],size:10,scale:3,className:"identicon rounded-circle"}),Object(f.jsx)("p",{style:{fontSize:"12px",fontWeight:"bold"},className:"m-0 p-0 mx-2",children:e[1]})]})}))]})})]})]})]})};var T=function(){var e=Object(a.useState)(0),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(o.a)(c,2),u=r[0],j=r[1],m=Object(a.useState)(null),O=Object(o.a)(m,2),h=O[0],g=O[1],v=Object(a.useState)(null),T=Object(o.a)(v,2),N=T[0],S=T[1],k=Object(a.useState)(0),C=Object(o.a)(k,2),B=C[0],F=C[1],M=Object(a.useState)([]),z=Object(o.a)(M,2),q=z[0],D=z[1],E=Object(a.useState)(!1),A=Object(o.a)(E,2),L=A[0],P=A[1],I=Object(a.useState)(!1),R=Object(o.a)(I,2),W=R[0],_=R[1],G=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t,n,a,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=23;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new d.a(window.celo),n=Object(p.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:return a=e.sent,s=a[0],n.defaultAccount=s,e.next=13,g(s);case 13:return e.next=15,S(n);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("There is an error"),console.log({error:e.t0});case 21:e.next=24;break;case 23:console.log("please install the extension");case 24:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){G()}),[]),Object(a.useEffect)((function(){if(N&&h)return U();console.log("no kit or address")}),[N,h]),Object(a.useEffect)((function(){u&&J()}),[u]);var U=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t,n,a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,N.getTotalBalance(h);case 3:t=e.sent,n=t.CELO.shiftedBy(-18).toFixed(2),a=t.cUSD.shiftedBy(-18).toFixed(2),c=new N.web3.eth.Contract(y,"0x3AcEEA272E68a5B95a087D708Bd7CaBfa9Ebe50b"),j(c),s(n),F(a),_(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var t,n,a,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.methods.getPayeeLength().call();case 2:t=e.sent,n=[],a=Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Promise(function(){var e=Object(l.a)(Object(i.a)().mark((function e(n,a){var s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.methods.fetchPayeeById(t).call();case 2:s=e.sent,n({index:t,owner:s[0],payeeFullName:s[1],payeeDescription:s[2],networkType:s[3],payeeGasFee:new b.a(s[4])});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n.push(a),P(!1);case 3:case"end":return e.stop()}}),e)})),s=0;case 6:if(!(s<t)){e.next=11;break}return e.delegateYield(a(s),"t0",8);case 8:s++,e.next=6;break;case 11:return e.next=13,Promise.all(n);case 13:c=e.sent,D(c);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t,n,a,s){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,c=new b.a(a).shiftedBy(18).toString(),e.next=5,u.methods.createPayee(t,n,s,c).send({from:h});case 5:_(!1),alert("Request created"),J(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert("Terminated");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a,s){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)(x,{balance:B,celo:n,modal:L,toggle:function(){return P(!L)},createRequest:H,loading:W}),Object(f.jsx)(w,{requests:q,contract:u,kit:N,address:h,loading:W,getBalance:U,getRequests:J})]})};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(T,{})}),document.getElementById("root"))}},[[813,1,2]]]);
//# sourceMappingURL=main.910eee0e.chunk.js.map