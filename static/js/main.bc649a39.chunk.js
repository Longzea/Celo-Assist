(this["webpackJsonpcelo-assist"]=this["webpackJsonpcelo-assist"]||[]).push([[0],{179:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},344:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"_payeeFullName","type":"string"},{"internalType":"string","name":"_payeeDescription","type":"string"},{"internalType":"string","name":"_networkType","type":"string"},{"internalType":"uint256","name":"_payeeGasFee","type":"uint256"}],"name":"createPayee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"fetchPayeeById","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"fundPayee","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"getChatsById","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"string","name":"message","type":"string"}],"internalType":"struct CeloAssist.Chat[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPayeeLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"_message","type":"string"}],"name":"storeChatMessages","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},371:function(e,t){},377:function(e,t){},394:function(e,t){},396:function(e,t){},411:function(e,t){},412:function(e,t){},472:function(e,t){},474:function(e,t){},485:function(e,t){},487:function(e,t){},512:function(e,t){},513:function(e,t){},519:function(e,t){},521:function(e,t){},533:function(e,t){},560:function(e,t){},813:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(40),r=n.n(c),i=(n(356),n(29)),o=n(46),l=n(38),u=n(177),p=n.n(u),d=n(343),j=n(32),b=n.n(j),y=n(344),m=n(179),f=n(28),h=n.p+"static/media/celo-1.d4b7af52.jpg",O=n(4),x=function(e){var t=e.modal,n=e.toggle,s=e.createRequest,c=e.balance,r=(e.celo,Object(a.useState)("")),i=Object(l.a)(r,2),o=i[0],u=i[1],p=Object(a.useState)(""),d=Object(l.a)(p,2),j=d[0],b=d[1],y=Object(a.useState)(""),m=Object(l.a)(y,2),x=m[0],v=m[1],g=Object(a.useState)(0),w=Object(l.a)(g,2),T=w[0],N=w[1],k=Object(O.jsx)("button",{className:"close",onClick:n,type:"button",children:"\xd7"});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("header",{className:"d-flex justify-content-between p-3",children:[Object(O.jsx)("h6",{children:"CeloAssist"}),Object(O.jsxs)("h6",{className:"shadow",children:[c," "," ","cUSD"]})]}),Object(O.jsx)("br",{}),Object(O.jsx)(f.Container,{children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-md-6 mt-4",children:[Object(O.jsx)("h5",{children:"Celo Assist"}),Object(O.jsx)("p",{children:"Celo assist is a platform where  developer assist each other in paying for gas fee on the Celo network"}),Object(O.jsx)(f.Button,{color:"success",onClick:n,children:"Create a Request"})]}),Object(O.jsx)("div",{className:"col-md-6",children:Object(O.jsx)("img",{src:h,alt:"banner",className:"br-2"})})]})}),Object(O.jsxs)(f.Modal,{isOpen:t,toggle:n,className:f.className,children:[Object(O.jsx)(f.ModalHeader,{toggle:n,close:k,children:"Create a Request"}),Object(O.jsxs)(f.ModalBody,{children:[Object(O.jsx)(f.Label,{style:{fontSize:"12px"},children:"Fullname"}),Object(O.jsx)(f.Input,{type:"text",placeholder:"Fullname",required:!0,value:o,onChange:function(e){return u(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(f.Label,{style:{fontSize:"12px"},children:"Description"}),Object(O.jsx)(f.Input,{type:"textarea",placeholder:"Description",required:!0,value:j,onChange:function(e){return b(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(f.Label,{style:{fontSize:"12px"},children:"Amount"}),Object(O.jsx)(f.Input,{type:"number",placeholder:"Fee",required:!0,value:T,onChange:function(e){return N(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(f.Label,{style:{fontSize:"12px"},children:"Network Type"}),Object(O.jsxs)(f.Input,{type:"select",value:x,required:!0,onChange:function(e){return v(e.target.value)},children:[Object(O.jsx)("option",{value:"",children:"Select---"}),Object(O.jsx)("option",{value:"Testnet",children:"Testnet"}),Object(O.jsx)("option",{value:"Mainnet",children:"Mainnet"})]})]}),Object(O.jsxs)(f.ModalFooter,{children:[Object(O.jsx)(f.Button,{color:"danger",onClick:n,children:"Cancel"})," ",Object(O.jsx)(f.Button,{color:"success",onClick:function(){return s(o,j,T,x)},children:"Submit"})]})]})]})},v=n(181),g=n.n(v),w=function(e){var t=e.requests,n=e.contract,s=e.kit,c=e.address,r=Object(a.useState)(!1),u=Object(l.a)(r,2),p=u[0],d=u[1],j=function(){return d(!p)},y=Object(a.useState)({}),h=Object(l.a)(y,2),x=h[0],v=h[1],w=Object(a.useState)(""),T=Object(l.a)(w,2),N=T[0],k=T[1],C=Object(a.useState)(null),S=Object(l.a)(C,2),M=S[0],F=S[1],B=Object(O.jsx)("button",{className:"close",onClick:j,type:"button",children:"\xd7"}),D=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:[],new Promise(function(){var e=Object(o.a)(Object(i.a)().mark((function e(a,s){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.fetchPayeeById(t).call();case 2:c=e.sent,a({id:t,owner:c[0],payeeFullName:c[1],payeeDescription:c[2],networkType:c[3],payeeGasFee:new b.a(c[4])});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),v(e),d(!0)})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,a){var r,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new s.web3.eth.Contract(m,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1"),o=new b.a(t).shiftedBy(18).toString(),e.next=5,r.methods.approve("0x7bb2a5a715d1304C12355ad34b7CEE200DDe0791",o).send({from:c});case 5:return e.sent,e.next=8,n.methods.fundPayee(a).send({from:c});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.storeChatMessages(t,N).send({from:c});case 3:console.log("success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.getChatsById(t).call();case 2:a=e.sent,console.log(a[0][1]),F(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.Container,{children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("center",{children:Object(O.jsx)("h3",{className:"my-5",children:"Requests"})}),t&&t.map((function(e){return Object(O.jsx)("div",{className:"card shadow col-lg-4 col-md-5 col-sm-12 ml-3 mr-1 mb-3 p-0",children:Object(O.jsx)("div",{className:"card-body p-2",children:Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{seed:e.owner,size:10,scale:3,className:"identicon"})}),Object(O.jsxs)("div",{className:"mx-3",children:[Object(O.jsx)("h6",{children:e.payeeFullName}),Object(O.jsxs)("p",{style:{margin:0,padding:0,fontSize:"12px"},children:["Network Type: ",e.networkType]})]}),Object(O.jsx)(f.Button,{size:"sm",color:"success",className:"p-1 ml-auto",onClick:function(){return D(e.index)},children:"View"})]})})})}))]})}),Object(O.jsxs)(f.Modal,{isOpen:p,toggle:j,className:f.className,children:[Object(O.jsx)(f.ModalHeader,{toggle:j,close:B,children:"Details:"}),Object(O.jsxs)(f.ModalBody,{children:[Object(O.jsx)("div",{className:"card",children:Object(O.jsx)("div",{className:"card-body",children:Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{seed:x.owner,size:10,scale:3,className:"identicon"})}),Object(O.jsxs)("div",{className:"mx-3",children:[Object(O.jsx)("h6",{className:"title",children:x.payeeFullName}),Object(O.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Description:"}),Object(O.jsx)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:x.payeeDescription}),Object(O.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Amount:"}),Object(O.jsxs)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:[x.payeeGasFee/Math.pow(10,18)," Celo"]}),Object(O.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Network Type:"}),Object(O.jsx)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:x.networkType}),Object(O.jsx)("p",{style:{fontWeight:"bold"},className:"p-0 m-0",children:"Wallet Address:"}),Object(O.jsx)("p",{style:{fontSize:"15px"},className:"p-0 m-0",children:x.owner}),Object(O.jsx)("br",{}),Object(O.jsx)(f.Button,{size:"sm",color:"success",onClick:function(){return z(x.payeeGasFee/Math.pow(10,18),x.id)},children:"Transfer"}),Object(O.jsx)(f.Button,{size:"sm",className:"mx-2",color:"primary",children:"Chat"})]})]})})}),Object(O.jsx)("div",{className:"card",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsxs)("div",{className:"d-flex align-items-center",children:[Object(O.jsx)(f.Input,{type:"text",placeholder:"type your message",value:N,onChange:function(e){return k(e.target.value)}}),Object(O.jsx)(f.Button,{onClick:function(){return P(x.id)},children:"Send"}),Object(O.jsx)(f.Button,{onClick:function(){return q(x.id)},children:"v"})]}),M&&M.map((function(e,t){return Object(O.jsx)("p",{children:e[0]})}))]})})]})]})]})};var T=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(l.a)(c,2),u=r[0],j=r[1],m=Object(a.useState)(null),f=Object(l.a)(m,2),h=f[0],v=f[1],g=Object(a.useState)(null),T=Object(l.a)(g,2),N=T[0],k=T[1],C=Object(a.useState)(0),S=Object(l.a)(C,2),M=S[0],F=S[1],B=Object(a.useState)([]),D=Object(l.a)(B,2),z=D[0],P=D[1],q=Object(a.useState)(!1),I=Object(l.a)(q,2),A=I[0],E=I[1],L=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=23;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new p.a(window.celo),n=Object(d.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:return a=e.sent,s=a[0],n.defaultAccount=s,e.next=13,v(s);case 13:return e.next=15,k(n);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("There is an error"),console.log({error:e.t0});case 21:e.next=24;break;case 23:console.log("please install the extension");case 24:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){L()}),[]),Object(a.useEffect)((function(){if(N&&h)return _();console.log("no kit or address")}),[N,h]),Object(a.useEffect)((function(){u&&W()}),[u]);var _=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getTotalBalance(h);case 2:t=e.sent,n=t.CELO.shiftedBy(-18).toFixed(2),a=t.cUSD.shiftedBy(-18).toFixed(2),c=new N.web3.eth.Contract(y,"0x7bb2a5a715d1304C12355ad34b7CEE200DDe0791"),j(c),s(n),F(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.methods.getPayeeLength().call();case 2:t=e.sent,n=[],a=Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Promise(function(){var e=Object(o.a)(Object(i.a)().mark((function e(n,a){var s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.methods.fetchPayeeById(t).call();case 2:s=e.sent,n({index:t,owner:s[0],payeeFullName:s[1],payeeDescription:s[2],networkType:s[3],payeeGasFee:new b.a(s[4])});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n.push(a),E(!1);case 3:case"end":return e.stop()}}),e)})),s=0;case 6:if(!(s<t)){e.next=11;break}return e.delegateYield(a(s),"t0",8);case 8:s++,e.next=6;break;case 11:return e.next=13,Promise.all(n);case 13:c=e.sent,P(c),console.log(c);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,n,a,s){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new b.a(a).shiftedBy(18).toString(),e.next=4,u.methods.createPayee(t,n,s,c).send({from:h});case 4:W(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,s){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)(x,{balance:M,celo:n,modal:A,toggle:function(){return E(!A)},createRequest:G}),Object(O.jsx)(w,{requests:z,contract:u,kit:N,address:h})]})};r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(T,{})}),document.getElementById("root"))}},[[813,1,2]]]);
//# sourceMappingURL=main.bc649a39.chunk.js.map